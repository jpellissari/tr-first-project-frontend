<div [hidden]="confirmation">
  <form class="form" novalidate [formGroup]="form">
    <div class="form__header">
      <h2 class="form__title">Edit Client</h2>

      <div
        class="form__action--delete button"
        nz-popconfirm
        nzPopconfirmTitle="Are you sure delete this client?"
        nzPopconfirmPlacement="bottom"
        (nzOnConfirm)="deleteClient()"
        [nzIcon]="iconTpl"
      >
        <i nz-icon nzType="delete" nzTheme="outline"></i>
      </div>
    </div>

    <div class="form-field">
      <label for="client-id" class="form-field__label">ID: </label>
      <input
        class="form-field__input"
        id="client-id"
        type="text"
        formControlName="id"
      />
    </div>

    <div
      class="form-field"
      [ngClass]="{ 'is-invalid': submitted && hasError('name') }"
    >
      <label for="client-name" class="form-field__label">Name: </label>
      <input
        class="form-field__input"
        id="client-name"
        type="text"
        placeholder="Client's name"
        formControlName="name"
      />
      <div
        class="form-field__error"
        *ngIf="submitted && hasError('name')?.required"
      >
        <p>Por favor informe um nome para o cliente.</p>
      </div>
      <div
        class="form-field__error"
        *ngIf="submitted && hasError('name')?.minlength"
      >
        <p>
          Nome precisa ter no mínimo
          {{ hasError('name')?.minlength.requiredLength }} caracteres.
        </p>
      </div>
      <div
        class="form-field__error"
        *ngIf="submitted && hasError('name')?.maxlength"
      >
        <p>
          Nome pode ter no máximo
          {{ hasError('name')?.maxlength.requiredLength }} caracteres.
        </p>
      </div>
    </div>

    <div class="button-wrapper">
      <button
        type="submit"
        class="button button--form button--primary"
        (click)="updateClient()"
      >
        Create
      </button>
      <button
        class="button button--form button--secondary"
        (click)="closeForm()"
      >
        Cancel
      </button>
    </div>
    <ngx-spinner><p style="color: white">Loading...</p></ngx-spinner>
  </form>
</div>
<ng-template #iconTpl>
  <i nz-icon nzType="question-circle-o" style="color: red"></i>
</ng-template>
